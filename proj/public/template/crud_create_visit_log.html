<div class="container-fluid theme-showcase">

    <div class="page-header">
        <h1>&nbsp;<a ng-href='#/boards'>功能列表</a>&gt;&nbsp;<a ng-href='{{crud_create.parent.url}}'>{{crud_create.parent.title}}</a>&gt;&nbsp;{{crud_create.title}}</h1>
        
    </div>

    <div class="row">
        <div class="col-md-8">
            
            <button type="button" class="btn btn-sm btn-success"    ng-click="on_create(crud_create)">Create</button>
            <button type="button" class="btn btn-sm btn-default"    ng-click="on_reset (crud_create)">Reset</button>
            <button type="button" class="btn btn-sm btn-danger"     ng-click="on_cancel (crud_create)">Cancel</button>

            <table class="table table-bordered">
                <tbody >
                    <tr ng-repeat="item in crud_create.content">
                        <td align="right" > <span class="label label-default">{{item[0].key}}</span>    </td>

                        <td ng-switch="item[1].op_type">               
                            <p ng-switch-when="select" >
                                <select ng-model="item[1].key" 
                                    ng-options='item.key as item.key+ " -- " + item.show_as for item in (item[1].op_args.items | filter_from_key: ( item[1].op_args.filter_ref_xy == null) ? null : crud_create.content[item[1].op_args.filter_ref_xy.x][item[1].op_args.filter_ref_xy.y].key)'>
                                </select>
                            </p>
                            <p ng-switch-when="dialog">
                                <input type="{{item[1].type}}" ng-model="item[1].key" ng-readonly="item[1].editable != 1"  ng-disabled="item[1].editable != 1"/>  
                                <button type="button" class="btn btn-sm btn-default" ng-click="click_to_open(crud_create, item[1])">Select</button>
                            </p>
                            <p ng-switch-default="">
                                <input type="{{item[1].type}}" ng-model="item[1].key" ng-readonly="item[1].editable != 1" ng-disabled="item[1].editable != 1"/>  
                            </p>
                        </td>

                        <td align="right">  <span class="label label-default">{{item[2].key}}</span>    </td>

                        <td ng-switch="item[3].op_type">               
                            <p ng-switch-when="select">
                                <select ng-model="item[3].key" 
                                    ng-options='item.key as item.key+ " -- " + item.show_as for item in (item[3].op_args.items | filter_from_key: ( item[3].op_args.filter_ref_xy == null) ? null : crud_create.content[item[3].op_args.filter_ref_xy.x][item[3].op_args.filter_ref_xy.y].key)'>
                                </select>
                            </p>
                            <p ng-switch-when="dialog">
                                <input type="{{item[3].type}}" ng-model="item[3].key" ng-readonly="item[3].editable != 1" ng-disabled="item[3].editable != 1"/>  
                                <button type="button" class="btn btn-sm btn-default" ng-click="click_to_open(crud_create, item[3])">Select</button>
                            </p>
                            <p ng-switch-default="">
                                <input type="{{item[3].type}}" ng-model="item[3].key" ng-readonly="item[3].editable != 1" ng-disabled="item[3].editable != 1"/>  
                            </p>
                        </td>

                    </tr>
                    <tr><td align="right" > <span class="label label-success">拜访事由信息</span></td></tr>
                    <tr ng-repeat="item in crud_create.content_detail">
                        <td align="right" > <span class="label label-default">{{item[0].key}}</span>    </td>

                        <td ng-switch="item[1].op_type">               
                            <p ng-switch-when="select" >
                                <select ng-model="item[1].key" 
                                    ng-options='item.key as item.key+ " -- " + item.show_as for item in (item[1].op_args.items)' disabled="disabled">
                                </select>
                            </p>
                            <p ng-switch-default="">
                                <input type="{{item[1].type}}" ng-model="item[1].key" ng-readonly="item[1].editable != 1" ng-disabled="item[1].editable != 1"/>  
                            </p>
                        </td>

                        <td align="right">  <span class="label label-default">{{item[2].key}}</span>    </td>

                        <td ng-switch="item[3].op_type">               
                            <p ng-switch-when="select">
                                <select ng-model="item[3].key" 
                                    ng-options='item.key as item.key+ " -- " + item.show_as for item in (item[3].op_args.items )' disable="disabled">
                                </select>
                            </p>
                            <p ng-switch-default="">
                                <input type="{{item[3].type}}" ng-model="item[3].key" ng-readonly="item[3].editable != 1" ng-disabled="item[3].editable != 1"/>  
                            </p>
                        </td>

                    </tr>
                </tbody>
            </table>

        </div> <!--/.col-md-8-->
    </div> <!--/.row -->
</div>
